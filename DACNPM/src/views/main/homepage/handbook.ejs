<% extend("../app.ejs") %>
    <section class="detail-nav">
        <div class="container">
            <div class="container">
                <div class="row">
                    <div class="col-2">
                        <div class="menu-title text-decoration-none">
                            <a href="/" class="text-decoration-none">
                                <img class="menu-nav" src="/images/background/smile.png" alt="logo ảnh">
                                <span class="text-decoration-none"><b>Doctors care</b></span>
                            </a>
                        </div>
                    </div>
                    <div class="col-8 d-flex flex-row justify-content-center align-self-center menu-type">
                        <span class="d-block"><a href="/" class="text-decoration-none"><b>Trang chủ</b></a></span>
                        <span class="d-block mx-5"><a href="/for-patients" class="text-decoration-none"><b>Dành cho bệnh
                                    nhân</b></a></span>
                        <span class="d-block"><a href="/for-doctors" class="text-decoration-none"><b>Dành cho bác
                                    sĩ</b></a></span>
                    </div>
                    <div class="col-2 d-flex justify-content-center align-items-center">
                        <span><a href="https://www.facebook.com/DoctorCare255" target="_blank"
                                class="text-decoration-none" style="color: white;"><b>Cần hỗ trợ?</b></a></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="detail-content detail-handbook">
        <div class="container">
            <div class="container">
                <div class="row">
                    <div class="col-8">
                        <!-- Giữ nguyên input, chỉ thêm placeholder mô tả rõ hơn -->
                        <div class="input-search-post">
                            <input id="searchInDetailPost" class="form-control" type="text" style="margin-top: 20px;"
                                placeholder="Tìm kiếm cẩm nang y tế...">
                        </div>
                        <hr>
                        <div class="title-post">
                            <%= handbook.title %>
                        </div>
                        <div class="content-detail-post"><%- handbook.contentHTML %></div>
                    </div>
                    <div class="col-4 tableOfContent pt-3">
                        <div id="toc">
                            <div class="main-content">Content</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>

        $(function () {
            var toc = $("#toc").tocify({
                selectors: "h2,h3,h4,h5"
            }).data("toc-tocify");
            toc.setOption("showEffect", "fadeIn");
        });

        // Xử lý tìm kiếm khi nhấn Enter trong ô tìm kiếm
        $(document).ready(function () {
            $('#searchInDetailPost').on('keydown', function (event) {
                if (event.which === 13 || event.keyCode === 13) {
                    event.preventDefault(); // Ngăn form submit mặc định
                    let keyword = $(this).val().trim();
                    if (keyword) {
                        // Chuyển hướng đến trang tìm kiếm với từ khóa
                        window.location.href = `/handbook/search?q=${encodeURIComponent(keyword)}`;
                    }
                }
            });
        });

    </script>